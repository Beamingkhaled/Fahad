<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>شنسوي الويكند؟</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Reem+Kufi:wght@700&family=Cairo:wght@400;700&family=Caveat:wght@700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* modern purple/indigo system */
      --grad-1: linear-gradient(135deg,#ff6bd6 0%,#a06bff 45%,#4f46e5 100%);
      --bg-1: #0b0a13;
      --bg-2: #14122a;
      --card: rgba(255,255,255,.06);
      --card-strong: rgba(255,255,255,.10);
      --text: #ffffff;
      --muted: #cfc7ff;
      --shadow: 0 20px 60px rgba(79,70,229,.35);
      --radius: 18px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:
        radial-gradient(1200px 600px at 20% -10%, #211c4a 0%, transparent 55%),
        radial-gradient(900px 600px at 120% 10%, #2a0f2d 0%, transparent 50%),
        var(--bg-1);
      color:var(--text);
      font-family: "Cairo", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      display:flex;
      align-items: flex-start;
      justify-content: center;
      padding: 20px;
    }

    .wrap{ width: min(960px, 100%); }

    /* header */
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 16px;
      margin-bottom: 18px;
    }

    .brand{
      display:flex; align-items:center; gap:14px;
    }

    .logo{ width: 210px; height:auto; display:block; filter: drop-shadow(0 8px 24px rgba(155,92,255,.35)); }

    /* title */
    h1{
      font-family: "Reem Kufi", system-ui;
      font-size: clamp(28px, 4.2vw, 46px);
      margin: 8px 0 4px;
      line-height: 1.1;
      letter-spacing: .2px;
      text-shadow: 0 2px 0 rgba(0,0,0,.25);
    }

    /* progress */
    .progress{
      height: 8px;
      background: var(--card);
      border-radius: 999px;
      overflow:hidden;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.05);
      margin: 10px 0 22px;
    }
    .progress > i{
      display:block; height:100%; width:0%;
      background: var(--grad-1);
      box-shadow: var(--shadow);
      transition: width .35s ease;
    }

    /* cards */
    .card{
      background: var(--card);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      box-shadow: var(--shadow);
      padding: 18px;
    }

    .question{ font-size: clamp(18px, 2.8vw, 24px); margin: 6px 4px 14px; font-weight:700; }

    .options{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 12px;
    }

    .opt{
      border: 1px solid rgba(255,255,255,.14);
      background: var(--card-strong);
      border-radius: 14px;
      padding: 14px 16px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
      text-align:center;
      user-select:none;
    }
    .opt:active{ transform: scale(.98); }
    .opt:hover{ border-color: rgba(255,255,255,.30); }

    /* result */
    .result{ display:none; }
    .result .title{
      font-size: clamp(22px, 3.2vw, 28px);
      font-weight: 800;
      margin: 8px 0 12px;
    }
    .result .box{
      background: var(--card-strong);
      border: 1px solid rgba(255,255,255,.16);
      border-radius: 14px;
      padding: 18px;
      font-size: 22px;
      font-weight: 800;
      text-align:center;
    }
    .result small{ color: var(--muted); display:block; margin-top: 6px; }

    /* actions */
    .actions{
      display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-top:18px;
    }
    .btn{
      border:none; cursor:pointer; font-size:16px; font-weight:800;
      padding:12px 16px; border-radius:14px; min-width:160px;
    }
    .btn-primary{ background: var(--grad-1); color:#fff; box-shadow: var(--shadow); }
    .btn-ghost{ background: transparent; color:#fff; border:1px solid rgba(255,255,255,.25); }

    /* utility */
    .hide{ display:none !important; }

    @media (min-width:768px){
      .options{ grid-template-columns: repeat(3, minmax(0,1fr)); }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <!-- NEW LOGO -->
        <svg viewBox="0 0 420 160" class="logo" aria-label="شنسوي؟ by FAHAD">
          <defs>
            <linearGradient id="g" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%"  stop-color="#ff77c8"/>
              <stop offset="55%" stop-color="#9b5cff"/>
              <stop offset="100%" stop-color="#4f46e5"/>
            </linearGradient>
            <filter id="softGlow">
              <feGaussianBlur stdDeviation="6" result="blur"/>
              <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
          </defs>
          <!-- rounded square frame -->
          <rect x="8" y="8" rx="32" ry="32" width="144" height="144"
                fill="none" stroke="url(#g)" stroke-width="16" filter="url(#softGlow)"/>
          <!-- Arabic title -->
          <text x="80" y="90" text-anchor="middle"
                font-family="'Reem Kufi', system-ui" font-size="56"
                fill="url(#g)">شنسوي؟</text>
          <!-- by FAHAD (handwritten) -->
          <text x="165" y="130"
                font-family="'Caveat', cursive" font-size="52"
                fill="url(#g)" style="letter-spacing:1px">by FAHAD</text>
        </svg>
      </div>
    </header>

    <h1>شنسوي الويكند؟</h1>

    <!-- progress -->
    <div class="progress" aria-hidden="true"><i id="progBar"></i></div>

    <!-- QUIZ CARD -->
    <section id="quizCard" class="card">
      <div id="qText" class="question">خلّنا نعرف مزاجك اليوم 👇</div>
      <div id="options" class="options"></div>
    </section>

    <!-- RESULT CARD -->
    <section id="resultCard" class="card result">
      <div class="title">اقتراحنا لكم 👇</div>
      <div class="box" id="finalTitle">—</div>
      <small id="similarText" class="hide">خيارات مشابهة: <span id="similarList"></span></small>

      <div class="actions">
        <button class="btn btn-primary" id="restartBtn">نعيد من أول؟</button>
        <button class="btn btn-ghost" id="swapBtn">بدّل الاختيار</button>
      </div>
    </section>
  </div>

  <script>
    // ===== DATA (tags used internally only — never shown) =====
    const QUESTIONS = [
      {
        text: "تحبها داخل ولا برا؟",
        options: [
          { label: "Outdoor", tags: ["outdoor"] },
          { label: "Indoor", tags: ["indoor"] },
          { label: "ما يفرق", tags: ["flex"] }
        ]
      },
      {
        text: "مزاجك لحالك أو جماعة؟",
        options: [
          { label: "جماعة", tags: ["group"] },
          { label: "لحالي", tags: ["solo"] },
          { label: "قريبين فقط", tags: ["few"] }
        ]
      },
      {
        text: "الجهد؟",
        options: [
          { label: "خفيف", tags: ["light"] },
          { label: "متوسط", tags: ["medium"] },
          { label: "ثقيل", tags: ["intense"] }
        ]
      }
    ];

    const ACTIVITIES = [
      { title: "رحلة دراجات", tags: ["outdoor","group","medium"] },
      { title: "حفلة شواء على البحر", tags: ["outdoor","group","light"] },
      { title: "كوفي وボード جيمز", tags: ["indoor","group","light"] },
      { title: "سينما + عشاء", tags: ["indoor","few","light"] },
      { title: "تريك خفيف في الصباحية", tags: ["outdoor","few","medium"] },
      { title: "سبا و مساج", tags: ["indoor","solo","light"] },
      { title: "تنس/بادل", tags: ["outdoor","few","intense"] },
      { title: "متحف + كافيه", tags: ["indoor","few","light"] },
      { title: "تمشى في الشاطئ", tags: ["outdoor","solo","light"] },
      { title: "تخييم قريب", tags: ["outdoor","group","medium"] }
    ];

    // ===== STATE =====
    let step = 0;
    let chosenTags = new Set();

    const qText = document.getElementById('qText');
    const optionsBox = document.getElementById('options');
    const quizCard = document.getElementById('quizCard');
    const resultCard = document.getElementById('resultCard');
    const finalTitle = document.getElementById('finalTitle');
    const similarText = document.getElementById('similarText');
    const similarList = document.getElementById('similarList');
    const progBar = document.getElementById('progBar');

    function updateProgress(){
      const pct = (step / QUESTIONS.length) * 100;
      progBar.style.width = Math.max(4, pct) + '%';
    }

    function renderQuestion(){
      const q = QUESTIONS[step];
      qText.textContent = q.text;
      optionsBox.innerHTML = '';
      q.options.forEach(opt => {
        const b = document.createElement('button');
        b.className = 'opt';
        b.type = 'button';
        b.textContent = opt.label;
        b.onclick = () => choose(opt.tags);
        optionsBox.appendChild(b);
      });
      updateProgress();
    }

    function choose(tags){
      tags.forEach(t => chosenTags.add(t));
      step++;
      if(step >= QUESTIONS.length){
        showResult();
      } else {
        renderQuestion();
      }
    }

    // scoring by tag overlap
    function bestMatch(list, wantTags){
      const scored = list.map(item => {
        const score = item.tags.reduce((acc,t)=> acc + (wantTags.has(t)?1:0), 0);
        return { item, score };
      }).sort((a,b)=> b.score - a.score);
      return scored;
    }

    function showResult(){
      // compute
      const ranked = bestMatch(ACTIVITIES, chosenTags);
      const top = ranked[0]?.item || { title:"اِطلعوا تتمشون ✨" };
      finalTitle.textContent = top.title;

      // similar (2–3 more)
      const alts = ranked.slice(1,4).map(r => r.item.title);
      if(alts.length){
        similarList.textContent = alts.join(" • ");
        similarText.classList.remove('hide');
      }else{
        similarText.classList.add('hide');
      }

      // swap views (NO TAGS/KEYWORDS ARE SHOWN)
      quizCard.classList.add('hide');
      resultCard.style.display = 'block';
      progBar.style.width = '100%';
    }

    function restart(){
      step = 0;
      chosenTags = new Set();
      resultCard.style.display = 'none';
      quizCard.classList.remove('hide');
      renderQuestion();
    }

    // swap = just pick next best suggestion
    function swap(){
      // rotate ACTIVITIES order by moving first to end then recompute
      ACTIVITIES.push(ACTIVITIES.shift());
      showResult();
    }

    document.getElementById('restartBtn').onclick = restart;
    document.getElementById('swapBtn').onclick = swap;

    // init
    renderQuestion();
  </script>
</body>
</html>
