<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>شنسوي الويكند؟ — نسخة فخمة + بيانات كاملة</title>

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cairo+Play:wght@700&family=Changa:wght@400;600;700&display=swap" rel="stylesheet">

<style>
/* =====================================================================
   THEME (explicit tokens)
   ===================================================================== */
:root{
  /* Core brand */
  --mint:#2AF5E9;                     /* neon teal/mint */
  --mint-25: rgba(42,245,233,.25);
  --mint-35: rgba(42,245,233,.35);
  --mint-55: rgba(42,245,233,.55);
  --mint-glow: 0 0 0 2px var(--mint-55), 0 0 28px 6px var(--mint-35);
  --accent2:#7c3aed;

  /* background: linear-gradient(180deg, #350e63 0%, #2a0c4d 100%);

  /* Text & glass */
  --text:#fff; --muted:#d6d7e2;
  --glass1:rgba(255,255,255,.10);
  --glass2:rgba(255,255,255,.06);
  --stroke:rgba(255,255,255,.26);
  --stroke-soft:rgba(255,255,255,.16);

  /* Radii */
  --r-xl:22px; --r-lg:20px;

  /* Sizing */
  --icon-size:62px; --iconbox:116px;

  /* Timing */
  --fast:.12s; --norm:.22s;
}

/* =====================================================================
   RESET + BASE
   ===================================================================== */
*{box-sizing:border-box}
html,body{height:100%}
html{scroll-behavior:smooth}
body {
  margin: 0;
  min-height: 100vh;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Kufi Arabic", "Noto Sans", Arial, sans-serif;
  color: #fff;

  /* smooth purple gradient background */
  background: linear-gradient(180deg, #350e63 0%, #2a0c4d 100%);
  background-attachment: fixed;
  background-repeat: no-repeat;
  background-size: cover;
}

/* =====================================================================
   LAYOUT
   ===================================================================== */
.app{max-width:980px;margin:0 auto;padding:20px clamp(16px,3vw,28px) 40px}
.topbar{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.reset{
  width:48px;height:48px;border-radius:14px;border:1px solid var(--stroke-soft);
  background:rgba(255,255,255,.10); color:#fff; font-size:22px; touch-action:manipulation;
}
.title{
  font-family:"Cairo Play","Changa"; font-weight:700; line-height:1.1;
  font-size:clamp(26px,5.6vw,44px); margin:12px 0 16px;
  background:linear-gradient(90deg,var(--mint),var(--accent2));
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
}

/* Panels */
.panel{
  border-radius:var(--r-xl);
  background:linear-gradient(180deg,var(--glass1),var(--glass2));
  border:1px solid var(--stroke);
  padding:16px; margin-bottom:16px;
  box-shadow: 0 0 0 1px rgba(42,245,233,.12), 0 10px 34px rgba(0,0,0,.35);
}
.section-title{color:var(--muted);font-size:clamp(14px,3.2vw,18px);margin:2px 6px 12px}

/* Progress */
.progress{
  height:8px;border-radius:14px;overflow:hidden;background:rgba(255,255,255,.10);
  border:1px solid var(--stroke-soft);margin:4px 6px 12px
}
.progress>span{
  display:block;height:100%;width:0;
  background:linear-gradient(90deg,var(--mint),var(--accent2));
  transition:width .25s ease
}

/* Grid */
.choices{display:grid;grid-template-columns:1fr;gap:14px}
@media (min-width:560px){.choices{grid-template-columns:1fr 1fr}}
@media (min-width:920px){.choices{grid-template-columns:1fr 1fr 1fr}}

/* Cards (real buttons) */
.card{
  appearance:none;-webkit-appearance:none;display:block;width:100%;text-align:center;cursor:pointer;
  background:rgba(255,255,255,.10);border:1px solid rgba(255,255,255,.25);
  border-radius:var(--r-lg); padding:18px 16px 16px; touch-action:manipulation;
  transition:transform var(--fast) ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
}
.card:hover{transform:translateY(-2px)} .card:active{transform:scale(.985)}
.card.selected{ border-color:transparent; box-shadow: var(--mint-glow); background:rgba(255,255,255,.14) }
.card *{pointer-events:none} /* inner elements never steal taps */

/* Icon box */
.iconbox{
  display:grid;place-items:center;width:var(--iconbox);height:var(--iconbox);
  margin:4px auto 10px;border-radius:26px;
  background:
    radial-gradient(120px 120px at 70% 20%, rgba(255,255,255,.25), rgba(255,255,255,.06)),
    linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.04));
  border:1px solid rgba(255,255,255,.22);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.08), 0 10px 25px rgba(0,0,0,.25);
}
.icon{font-size:var(--icon-size);line-height:1}
.label{font-size:18px}

/* Results */
.result{padding:8px 6px;text-align:center}
.result h3{
  font-size:clamp(20px,4.5vw,28px);margin:6px 0 8px;
  background:linear-gradient(90deg,var(--mint),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
.result p{color:#efeaf7}
.results-grid{display:grid;grid-template-columns:1fr;gap:10px;margin-top:8px}
@media (min-width:720px){.results-grid{grid-template-columns:1fr 1fr}}
.activity{
  background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.22);border-radius:16px;padding:12px 14px;text-align:right
}
.activity b{color:#fff}
.activity small{color:var(--muted)}
.badge{display:inline-block;font-size:12px;padding:2px 8px;border-radius:999px;margin-inline-start:6px;border:1px solid rgba(42,245,233,.6);color:#bffff8}

.hidden{display:none!important}
</style>
</head>
<body>
<div class="app">
  <div class="topbar">
    <button id="resetBtn" class="reset" type="button" title="إعادة">⟳</button>
  </div>

  <h1 class="title">شنسوي الويكند؟</h1>

  <!-- STEP 1 -->
  <section id="step1" class="panel" aria-label="الخطوة الأولى">
    <div class="progress"><span id="bar1" style="width:25%"></span></div>
    <h2 class="section-title">منو المجموعة؟</h2>
    <div id="choices1" class="choices"></div>
  </section>

  <!-- STEP 2 -->
  <section id="step2" class="panel hidden" aria-label="الخطوة الثانية">
    <div class="progress"><span id="bar2" style="width:50%"></span></div>
    <h2 class="section-title">الفئة؟</h2>
    <div id="choices2" class="choices"></div>
  </section>

  <!-- STEP 3 -->
  <section id="step3" class="panel hidden" aria-label="الخطوة الثالثة">
    <div class="progress"><span id="bar3" style="width:75%"></span></div>
    <h2 class="section-title">الميزانية؟</h2>
    <div id="choices3" class="choices"></div>
  </section>

  <!-- RESULTS -->
  <section id="step4" class="panel hidden" aria-live="polite" aria-label="النتيجة">
    <div class="progress"><span id="bar4" style="width:100%"></span></div>
    <div id="resultBox" class="result">
      <h3>اقتراحات الويكند</h3>
      <p>اختر من الخيارات بالأعلى لعرض قائمة الأنشطة.</p>
      <div id="resultsList" class="results-grid"></div>
    </div>
  </section>
</div>

<script>
/* =====================================================================
   DATA — BIG CATALOG (group → audience → budget)
   Add/modify freely. Kuwait-oriented names kept generic enough to reuse.
   ===================================================================== */

/* Step 1: Groups */
const GROUPS = [
  { id:'kids',   emoji:'👶',  label:'أطفال' },
  { id:'adults', emoji:'🧑‍🤝‍🧑', label:'بالغين' },
  { id:'mixed',  emoji:'👨‍👩‍👧‍👦', label:'مخلوط' }
];

/* Step 2: Audience per group */
const AUDIENCE = {
  kids:  [
    { id:'boys',  emoji:'👦',    label:'أولاد'   },
    { id:'girls', emoji:'👧',    label:'بنات'    },
    { id:'mix',   emoji:'👦👧',  label:'مختلط'   }
  ],
  adults:[
    { id:'men',   emoji:'👨',     label:'رجال'   },
    { id:'women', emoji:'👩',     label:'نساء'   },
    { id:'mix',   emoji:'🧑‍🤝‍🧑', label:'مختلط' }
  ],
  mixed: [
    { id:'mix',   emoji:'👨‍👩‍👧‍👦', label:'عائلي مختلط' }
  ]
};

/* Step 3: Budget */
const BUDGET = [
  { id:'cheap', emoji:'💸', label:'رخيص'   },
  { id:'exp',   emoji:'💎', label:'فاخر'   }
];

/* Activities Catalog
   key: "group|audience|budget" → array of {name, note, tags[]}
   NOTE: Add as many as you want; UI renders all.
*/
const ACTIVITIES = {
  /* ===========================
     KIDS — BOYS — CHEAP
     =========================== */
  'kids|boys|cheap': [
    {name:'ملاعب الحدائق', note:'كرة / سكوتر / سباق بسيط', tags:['خارج','مجاني']},
    {name:'ممشى + دراجات', note:'استئجار دراجة ساعة', tags:['نشاط']},
    {name:'متحف العلوم للأطفال', note:'تجارب ممتعة ورخيصة', tags:['تعليمي']},
    {name:'سوق الصغار المنزلي', note:'بيع/شراء بألعاب قديمة', tags:['منزلي']},
    {name:'مسابقة كنز', note:'ألغاز وتلميحات في البيت', tags:['لعبة']},
    {name:'حديقة مائية منزلية', note:'بالونات ماء + رشاشات', tags:['صيف']},
    {name:'كرة قدم شاطئية', note:'وقت العصر + عصير', tags:['رياضة']},
    {name:'مسابقة Lego', note:'أسرع بناء نموذج', tags:['إبداع']},
    {name:'قراءة قصص بطابع مغامرة', note:'اختيار نهاية القصة', tags:['ثقافي']},
    {name:'جلسة كرتون كلاسيك', note:'حلقة قصيرة + فشار', tags:['منزلي']},
  ],
  /* ===========================
     KIDS — BOYS — EXP
     =========================== */
  'kids|boys|exp': [
    {name:'كيدزانيا', note:'تجربة وظائف + وجبة خفيفة', tags:['تجربة']},
    {name:'ترامبولين بارك', note:'قفز + جلسة كوفي للأهل', tags:['طاقة']},
    {name:'VR للأطفال', note:'ألعاب واقع افتراضي', tags:['تقني']},
    {name:'بولينغ أطفال', note:'مسارات خفيفة + بيتزا', tags:['تحدي']},
    {name:'حلبة كارتنغ صغار', note:'لفّات محدودة', tags:['رياضة']},
    {name:'حصة سباحة خاصة', note:'مدرّب قصير', tags:['تعليم']},
    {name:'ورشة روبوت', note:'مقدمة برمجة', tags:['STEM']},
    {name:'mini-golf داخلي', note:'مسارات قصيرة', tags:['تسلية']},
    {name:'مدينة ترفيه داخلي', note:'ألعاب متنوعة', tags:['ألعاب']},
    {name:'كورس رسم سريع', note:'ساعة مع مدرّب', tags:['فني']},
  ],
  /* ===========================
     KIDS — GIRLS — CHEAP
     =========================== */
  'kids|girls|cheap': [
    {name:'ورشة رسم وستيكرز', note:'دفاتر تلوين + عصير', tags:['فني']},
    {name:'حديقة مع ألعاب رمل', note:'جلسة نزهة صغيرة', tags:['خارج']},
    {name:'صناعة إكسسوارات خرز', note:'عدة بسيطة', tags:['منزلي']},
    {name:'جلسة خبز كوكيز', note:'تزيين ومشاركة', tags:['مطبخ']},
    {name:'يوغا أطفال', note:'يوتيوب + بساط', tags:['صحة']},
    {name:'قصة تفاعلية', note:'اختيار أدوار', tags:['إبداع']},
    {name:'الطلاء بالماء في البلكونة', note:'سترة + فُرَش', tags:['متعة']},
    {name:'زيارة مكتبة عامة', note:'استعارة كتاب', tags:['ثقافي']},
    {name:'حديقة الفراشات الورقية', note:'قص ولصق', tags:['حِرف']},
    {name:'مسرحية دمى منزلية', note:'دعايات وسرد', tags:['تسلية']},
  ],
  /* ===========================
     KIDS — GIRLS — EXP
     =========================== */
  'kids|girls|exp': [
    {name:'معمل صلصال/سيراميك', note:'طلاء أعمالهم', tags:['فني']},
    {name:'سبا صغير للأطفال', note:'طلاء أظافر ولعب', tags:['تجربة']},
    {name:'مدينة الترفيه الداخلي', note:'تذاكر ألعاب', tags:['تسلية']},
    {name:'حصة باليه/رقص', note:'تجربة أولية', tags:['نشاط']},
    {name:'ورشة حلويات', note:'كب كيك وتزيين', tags:['مطبخ']},
    {name:'تصوير فني للأطفال', note:'جلسة قصيرة', tags:['إبداع']},
    {name:'VR لطيف للبنات', note:'ألعاب مناسبة العمر', tags:['تقني']},
    {name:'Mini bowling', note:'مسارات خفيفة', tags:['تحدي']},
    {name:'Pony riding (إن وجد)', note:'لفات قصيرة', tags:['حيوانات']},
    {name:'ورشة شموع معطرة', note:'يأخذونها معهم', tags:['حِرف']},
  ],
  /* ===========================
     KIDS — MIX — CHEAP
     =========================== */
  'kids|mix|cheap': [
    {name:'مسابقة كنز عائلية', note:'خرائط وبطاقات', tags:['لعبة']},
    {name:'ألعاب لوحية للأطفال', note:'UNO / Jenga', tags:['تسلية']},
    {name:'نقطة فنية مشتركة', note:'لوحة كبيرة جماعية', tags:['فني']},
    {name:'تجربة علمية بالمطبخ', note:'بركان صودا', tags:['تعليمي']},
    {name:'نزهة ليلية', note:'حوش/سطح + سناكات', tags:['منزلي']},
    {name:'جلسة قراءة جماعية', note:'كل طفل يختار قصة', tags:['ثقافي']},
    {name:'كرة ماء بالحديقة', note:'بالونات ماء', tags:['صيف']},
    {name:'سوق أطفال', note:'مقايضة ألعاب', tags:['تواصل']},
    {name:'ركن تصوير بسيط', note:'خلفية + إضاءة', tags:['إبداع']},
    {name:'جلسة حدائق عامة', note:'مراجيح + فطاير', tags:['خارج']},
  ],
  /* ===========================
     KIDS — MIX — EXP
     =========================== */
  'kids|mix|exp': [
    {name:'بولينغ عائلي للأطفال', note:'لعب + بيتزا', tags:['تحدي']},
    {name:'سينما أطفال', note:'فيلم جديد + فشار', tags:['تسلية']},
    {name:'Escape Kids خفيفة', note:'غرفة ألغاز مبسطة', tags:['لغز']},
    {name:'مركز تسلق جدران', note:'مسارات آمنة', tags:['نشاط']},
    {name:'مدينة ألعاب كبيرة', note:'أساور غير محدودة', tags:['ألعاب']},
    {name:'حديقة حيوانات صغيرة', note:'إطعام واستكشاف', tags:['تعليمي']},
    {name:'ورشة روبوت عائلية', note:'مشروع بسيط', tags:['STEM']},
    {name:'حصة سباحة مشتركة', note:'مدرب/منقذ', tags:['صحة']},
    {name:'مطعم ذو منطقة لعب', note:'للكل + حلو', tags:['مطاعم']},
    {name:'VR عائلي', note:'ألعاب جماعية', tags:['تقني']},
  ],

  /* ===========================
     ADULTS — MEN — CHEAP
     =========================== */
  'adults|men|cheap': [
    {name:'مباراة بلايستيشن', note:'فيفا/قتال + برجر', tags:['ألعاب']},
    {name:'مشي وكوفي مختص', note:'كورنيش/ممشى', tags:['خارج']},
    {name:'كوت/بلوت', note:'جلسة مقهى', tags:['ترفيه']},
    {name:'تمارين حديد مشتركة', note:'جيم ساعة', tags:['صحة']},
    {name:'صيد بسيط', note:'شواطئ آمنة', tags:['طبيعة']},
    {name:'تصوير شوارع', note:'ليلي/عدسات', tags:['إبداع']},
    {name:'باركورات خفيفة', note:'ساحة عامة', tags:['نشاط']},
    {name:'كرة قدم خماسية', note:'ملاعب مجمّعات', tags:['رياضة']},
    {name:'متاحف/معارض مجانية', note:'جولة قصيرة', tags:['ثقافة']},
    {name:'شيشة + مباراة', note:'كافيه اقتصادي', tags:['كوفي']},
  ],
  /* ===========================
     ADULTS — MEN — EXP
     =========================== */
  'adults|men|exp': [
    {name:'جولف محاكاة', note:'ساعة لعب', tags:['رياضة']},
    {name:'عشاء ستيك فاخر', note:'مطعم راقي', tags:['مطاعم']},
    {name:'كارتنغ داخلي', note:'سباق أصدقاء', tags:['تحدي']},
    {name:'Escape Room', note:'غرفة ألغاز صعبة', tags:['لغز']},
    {name:'VR منافس', note:'ألعاب رماية/سباق', tags:['تقني']},
    {name:'تجربة قهوة خاصة', note:'V60 / Geisha', tags:['كوفي']},
    {name:'رحلة بحر قصيرة', note:'قارب/جتسكي', tags:['بحر']},
    {name:'Paintball', note:'فرق وتحدي', tags:['رياضة']},
    {name:'سيجار لاونج', note:'جلسة فاخرة', tags:['جلسة']},
    {name:'Mini-golf فاخر', note:'مسارات راقية', tags:['تسلية']},
  ],
  /* ===========================
     ADULTS — WOMEN — CHEAP
     =========================== */
  'adults|women|cheap': [
    {name:'ورشة حِرف', note:'شموع/ريزن/كروشية', tags:['فني']},
    {name:'هاي تي بسيط', note:'كوفي رايق', tags:['كوفي']},
    {name:'مشية نسائية', note:'ممشى + بودكاست', tags:['صحة']},
    {name:'جلسة لوحية', note:'كوردز/سوشيال', tags:['ألعاب']},
    {name:'تصوير منتجات للهواية', note:'Mini studio', tags:['إبداع']},
    {name:'جلسة حناء/نقش', note:'منزلية', tags:['تجميل']},
    {name:'Swap Party', note:'تبادل أزياء', tags:['تواصل']},
    {name:'مطاعم اقتصادية', note:'سلطات/سوشي بسيط', tags:['مطاعم']},
    {name:'جلسة قراءة', note:'نادي كتاب', tags:['ثقافة']},
    {name:'جلسة بودكاست نسائي', note:'مواضيع خفيفة', tags:['محتوى']},
  ],
  /* ===========================
     ADULTS — WOMEN — EXP
     =========================== */
  'adults|women|exp': [
    {name:'سبا فاخر', note:'مساج + جوس بار', tags:['استرخاء']},
    {name:'عشاء سوشي شيك', note:'جلسة خاصة', tags:['مطاعم']},
    {name:'تجربة عطور شخصية', note:'مزج روائح', tags:['عطر']},
    {name:'صف يوغا خاص', note:'قروب صغير', tags:['صحة']},
    {name:'ركن تصوير محترف', note:'جلسة بورتريه', tags:['تصوير']},
    {name:'High Tea فاخر', note:'فندق/صالة أنيقة', tags:['كوفي']},
    {name:'Class خزف', note:'تصميم مزهريات', tags:['فني']},
    {name:'تجربة طهي فاخرة', note:'شيف خاص', tags:['مطبخ']},
    {name:'بوتيك محلي', note:'جولة + قهوة', tags:['تسوق']},
    {name:'سينما VIP', note:'قاعة خاصة', tags:['تسلية']},
  ],
  /* ===========================
     ADULTS — MIX — CHEAP
     =========================== */
  'adults|mix|cheap': [
    {name:'ألعاب لوحية في كافيه', note:'كتان/كركاسون', tags:['ألعاب']},
    {name:'نُزهة ليلية + فود ترك', note:'جلسة بسيطة', tags:['خارج']},
    {name:'تمشية كورنيش', note:'قهوة عربية', tags:['طبيعة']},
    {name:'مشاهدة مباراة', note:'كوفي اقتصادي', tags:['رياضة']},
    {name:'Night Photography', note:'كورنيش/مدينة', tags:['إبداع']},
    {name:'Potluck', note:'كل واحد يجيب طبق', tags:['منزلي']},
    {name:'تمارين HIIT جماعية', note:'حديقة/بيت', tags:['صحة']},
    {name:'Mini karaoke منزلي', note:'سماعات + شاشة', tags:['موسيقى']},
    {name:'جلسة تخطيط شهرية', note:'Notion/دفتر', tags:['تنظيم']},
    {name:'تحدي طبخ 15 دقيقة', note:'مكونات محددة', tags:['مطبخ']},
  ],
  /* ===========================
     ADULTS — MIX — EXP
     =========================== */
  'adults|mix|exp': [
    {name:'Escape Room', note:'تحدي جماعي', tags:['لغز']},
    {name:'موكتيل/كوكتيل فاخر', note:'جلسة راقية', tags:['كوفي']},
    {name:'رحلة بحر قصيرة', note:'قارب خاص', tags:['بحر']},
    {name:'Fine Dining', note:'تذوق قوائم', tags:['مطاعم']},
    {name:'VR منافسات', note:'سباق ورماية', tags:['تقني']},
    {name:'Private Bowling', note:'حجز مسار', tags:['تحدي']},
    {name:'Paintball/ليزر تاغ', note:'فرق وتحدي', tags:['رياضة']},
    {name:'Class ميكسولوجي موكتيل', note:'ورشة إعداد', tags:['تجربة']},
    {name:'سينما VIP خاصة', note:'قاعة صغيرة', tags:['تسلية']},
    {name:'Cook & Dine مع شيف', note:'مطبخ تعليمي', tags:['مطبخ']},
  ],

  /* ===========================
     FAMILY MIXED — CHEAP
     =========================== */
  'mixed|mix|cheap': [
    {name:'حديقة + دراجات', note:'سناكات بسيطة', tags:['خارج']},
    {name:'ليلة أفلام بالبيت', note:'قائمة تصويت + فشار', tags:['منزلي']},
    {name:'جلسة ألعاب عائلية', note:'Ludo / Uno', tags:['ألعاب']},
    {name:'طبخ جماعي', note:'بيتزا/سلطات', tags:['مطبخ']},
    {name:'زيارة سوق شعبي', note:'حلويات/مكسرات', tags:['تسوق']},
    {name:'تحدي تصوير', note:'صور بألوان معينة', tags:['إبداع']},
    {name:'حديقة الشاطئ', note:'جلسة عصر', tags:['طبيعة']},
    {name:'ورشة زراعة منزلية', note:'شتلات وأصص', tags:['خُضر']},
    {name:'مسابقة معلومات', note:'عواصم/أفلام', tags:['ثقافة']},
    {name:'مشي صباحي + فطور', note:'مطعم شعبي', tags:['صحة']},
  ],
  /* ===========================
     FAMILY MIXED — EXP
     =========================== */
  'mixed|mix|exp': [
    {name:'بولينغ عائلي', note:'لعب + عشاء خفيف', tags:['تحدي']},
    {name:'حديقة ترفيه داخلية', note:'أساور/تذاكر', tags:['تسلية']},
    {name:'رحلة بحر قريبة', note:'ساعة قارب', tags:['بحر']},
    {name:'عشاء عائلي راقٍ', note:'مطعم مناسب للجميع', tags:['مطاعم']},
    {name:'متحف/معرض مدفوع', note:'تجربة ثقافية', tags:['ثقافة']},
    {name:'حديقة حيوانات صغيرة', note:'إطعام وتصوير', tags:['تعليمي']},
    {name:'معمل آيسكريم', note:'اختيار نكهات', tags:['تجربة']},
    {name:'سينما VIP', note:'جلسة مريحة', tags:['تسلية']},
    {name:'VR جماعي', note:'ألعاب تنافسية', tags:['تقني']},
    {name:'كوفي فخم مع حلويات', note:'جلسة نهائية', tags:['كوفي']},
  ],
};

/* =====================================================================
   STATE
   ===================================================================== */
let CURRENT = { group:null, audience:null, budget:null };

/* =====================================================================
   HELPERS
   ===================================================================== */
const $ = s => document.querySelector(s);
function makeCard(opt, onClick){
  const b = document.createElement('button');
  b.type='button'; b.className='card';
  b.innerHTML = `<div class="iconbox"><div class="icon">${opt.emoji}</div></div><div class="label">${opt.label}</div>`;
  b.onclick = ()=> onClick(b, opt);   // simple + reliable on iOS
  return b;
}
function selectOne(container, clicked){
  container.querySelectorAll('.card').forEach(c=>c.classList.remove('selected'));
  clicked.classList.add('selected');
}
function show(id){ $(id).classList.remove('hidden'); }
function hide(id){ $(id).classList.add('hidden'); }

/* =====================================================================
   RENDER STEPS
   ===================================================================== */
function renderStep1(){
  const box = $('#choices1'); box.innerHTML='';
  GROUPS.forEach(o=> box.appendChild(makeCard(o,(b,opt)=>{
    selectOne(box,b); CURRENT.group = opt.id; renderStep2(opt.id);
  })));
}
function renderStep2(group){
  const box = $('#choices2'); box.innerHTML='';
  (AUDIENCE[group]||[]).forEach(o=> box.appendChild(makeCard(o,(b,opt)=>{
    selectOne(box,b); CURRENT.audience = opt.id; renderStep3();
  })));
  show('#step2'); hide('#step3'); hide('#step4');
  $('#bar2').style.width='50%';
  window.scrollTo({top:$('#step2').offsetTop-10, behavior:'smooth'});
}
function renderStep3(){
  const box = $('#choices3'); box.innerHTML='';
  BUDGET.forEach(o=> box.appendChild(makeCard(o,(b,opt)=>{
    selectOne(box,b); CURRENT.budget = opt.id; renderResults();
  })));
  show('#step3'); hide('#step4');
  $('#bar3').style.width='75%';
  window.scrollTo({top:$('#step3').offsetTop-10, behavior:'smooth'});
}
function renderResults(){
  const key = `${CURRENT.group}|${CURRENT.audience}|${CURRENT.budget}`;
  const list = ACTIVITIES[key] || [];
  const grid = $('#resultsList'); grid.innerHTML='';
  if(list.length===0){
    grid.innerHTML = `<div class="activity"><b>قريباً</b><br/><small>ما لقينا أنشطة لهالتركيبة — غيّر الفئة أو الميزانية.</small></div>`;
  }else{
    list.forEach(item=>{
      const div = document.createElement('div');
      div.className='activity';
      const tags = (item.tags||[]).map(t=>`<span class="badge">${t}</span>`).join('');
      div.innerHTML = `<b>${item.name}</b> ${tags}<br/><small>${item.note||''}</small>`;
      grid.appendChild(div);
    });
  }
  show('#step4'); $('#bar4').style.width='100%';
  window.scrollTo({top:$('#step4').offsetTop-10, behavior:'smooth'});
}

/* Reset */
$('#resetBtn').onclick = ()=>{
  CURRENT = {group:null,audience:null,budget:null};
  document.querySelectorAll('.card').forEach(c=>c.classList.remove('selected'));
  hide('#step2'); hide('#step3'); hide('#step4');
  window.scrollTo({top:0,behavior:'smooth'});
};

/* Init */
renderStep1();
</script>
</body>
</html>
